@using ASPTableEditor.Models
@model List<Employee>

<link href="~/Styles/MainStyle.css" rel="stylesheet" />

<h1>Employee List</h1>

<table id="employeeTable">
    <thead>
        <tr>
            <th data-sortable="true" onclick="sortTable(0, true)">Id</th>
            <th data-sortable="true" onclick="sortTable(1)">Name</th>
            <th></th>
            <th>Actions</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var employee in Model)
        {
            <tr>
                <td>@employee.Id</td>
                <td>@employee.Name</td>
                <td>
                    <button onclick="location.href='@Url.Action("EmployeeItemView", "Home")?id=@employee.Id'" class="btn btn-primary">View</button>
                </td>
                <td>
                    <button onclick="location.href='@Url.Action("EmployeeItemEdit", "Home")?id=@employee.Id'" class="btn btn-primary">Edit</button>
                </td>
                <td>
                    <button onclick="location.href='@Url.Action("EmployeeItemRemove", "Home")?id=@employee.Id'" class="btn btn-primary">Remove</button>
                </td>
            </tr>
        }
    </tbody>
</table>

<script>
    function sortTable(columnIndex, isNumeric = false) {
        var table = document.getElementById("employeeTable");
        var rows = Array.from(table.rows).slice(1); // Exclude header row
        var ascending = table.getAttribute("data-sort-order") !== "asc";

        rows.sort(function (rowA, rowB) {
            var cellA = rowA.cells[columnIndex].innerText;
            var cellB = rowB.cells[columnIndex].innerText;

            if (isNumeric) {
                cellA = parseInt(cellA, 10);
                cellB = parseInt(cellB, 10);
            } else {
                cellA = cellA.toLowerCase();
                cellB = cellB.toLowerCase();
            }

            if (cellA < cellB) return ascending ? -1 : 1;
            if (cellA > cellB) return ascending ? 1 : -1;
            return 0;
        });

        // Reorder rows
        rows.forEach(function (row) {
            table.tBodies[0].appendChild(row);
        });

        table.setAttribute("data-sort-order", ascending ? "asc" : "desc");
    }
</script>